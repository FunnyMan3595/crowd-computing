{% extends "basic.html" %}
{% block page_title %}{% if show %}{{ show.display_name|default:show.name }} by {{ show.host.twitch_username }}{% endif %}{% endblock %}
{% block page_name %}{% if show %}{{ show.display_name|default:show.name }} by {{ show.host.twitch_username }}{% endif %}{% endblock %}
{% block content %}
This is the management interface your show, <a href='../'>click here</a> for the viewer interface.<br/>
<br/>
<script>
function doCopy() {
  var field = document.getElementById("authSecret");
  field.select();
  field.setSelectionRange(0, 100);
  navigator.clipboard.writeText(field.value);
  document.getElementById("copiedNotice").classList.remove("hidden");
}
</script>
<input type="text" value="{{ show.minecraft_auth_secret }}" style="display: none" id=authSecret>
<button onclick="doCopy()">Copy Minecraft authentication secret
<div class="hidden" id=copiedNotice>Copied!</div></button>
<h3 class="collapser" onclick="collapse(this)">Manage regions</h3>
<div class="collapsed">
<table id="region-list">
    <thead>
        <tr>
            <th>Name</th>
            <th>Start X</th>
            <th>Start Y</th>
            <th>Start Z</th>
            <th>End X</th>
            <th>End Y</th>
            <th>End Z</th>
            <th>Size X</th>
            <th>Size Y</th>
            <th>Size Z</th>
            <th>Total Blocks</th>
            <th>Tags</th>
        </tr>
    </thead>
</table>
<script>
  let dt = new DataTable(document.getElementById("region-list"), {
    dom: "Bfrtip",
    buttons: ['colvis'],
    columnDefs: [
      {targets: [10], visible: true, searchable: false, sortable: false},
      {targets: [0,11], visible: true, searchable: true, sortable: true},
      {targets: '_all', visible:false, searchable: false, sortable: false}
    ],
    sAjaxSource: "../fetch_regions",
    serverSide: true,
  });
</script>
</div>
{% endblock %}
